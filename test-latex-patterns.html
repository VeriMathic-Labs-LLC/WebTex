<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test All LaTeX Patterns</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.8;
        }
        .test-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #007bff;
        }
        .test-case {
            background: #fff;
            padding: 15px;
            margin: 10px 0;
            border-radius: 4px;
            border: 1px solid #dee2e6;
        }
        h2 {
            color: #495057;
            border-bottom: 2px solid #dee2e6;
            padding-bottom: 10px;
        }
        .description {
            color: #6c757d;
            font-style: italic;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <h1>Comprehensive LaTeX Pattern Tests</h1>
    
    <div class="test-section">
        <h2>1. Adjacent Text (No Spaces)</h2>
        <div class="description">Testing equations directly adjacent to text without spaces</div>
        
        <div class="test-case">
            <p>Simple adjacent: hi$e^{\pi i}+1=0$hi</p>
        </div>
        
        <div class="test-case">
            <p>Complex adjacent: prefix$\alpha + \beta = \gamma$suffix</p>
        </div>
        
        <div class="test-case">
            <p>Multiple adjacent: start$x^2$middle$y_i$end</p>
        </div>
        
        <div class="test-case">
            <p>Chinese adjacent: 前缀$e^{\pi i}+1=0$后缀</p>
        </div>
        
        <div class="test-case">
            <p>Arabic adjacent: بداية$e^{\pi i}+1=0$نهاية</p>
        </div>
        
        <div class="test-case">
            <p>Russian adjacent: начало$e^{\pi i}+1=0$конец</p>
        </div>
        
        <div class="test-case">
            <p>Japanese adjacent: 始まり$e^{\pi i}+1=0$終わり</p>
        </div>
    </div>

    <div class="test-section">
        <h2>2. Block Math - Compact Format</h2>
        <div class="description">Testing block math without extra spaces/newlines</div>
        
        <div class="test-case">
            <p>Compact \[...\] format:</p>
            \[e^{\pi i}+1=0\]
        </div>
        
        <div class="test-case">
            <p>Compact $$...$$ format:</p>
            $$e^{\pi i}+1=0$$
        </div>
        
        <div class="test-case">
            <p>Complex compact equation:</p>
            \[\sum_{i=1}^{n} x_i = \alpha + \beta\]
        </div>
        
        <div class="test-case">
            <p>Complex compact with $$:</p>
            $$\int_{-\infty}^{\infty} e^{-x^2} dx = \sqrt{\pi}$$
        </div>
    </div>

    <div class="test-section">
        <h2>3. Block Math - Spaced Format</h2>
        <div class="description">Testing block math with extra spaces and newlines</div>
        
        <div class="test-case">
            <p>Spaced \[...\] format:</p>
            \[

            e^{\pi i}+1=0

            \]
        </div>
        
        <div class="test-case">
            <p>Spaced $$...$$ format:</p>
            $$

            e^{\pi i}+1=0

            $$
        </div>
        
        <div class="test-case">
            <p>Complex spaced equation:</p>
            \[
            
            \boldsymbol{v}_{U}(A)=f\left(\boldsymbol{v}_{A}, \boldsymbol{e}_{1}, \boldsymbol{e}_{2}, \ldots, \boldsymbol{e}_{H}\right)=\sum_{j=1}^{H} a\left(\boldsymbol{e}_{j}, \boldsymbol{v}_{A}\right) \boldsymbol{e}_{j}
            
            \]
        </div>
        
        <div class="test-case">
            <p>Complex spaced with $$:</p>
            $$
            
            \int_{0}^{1} \frac{1}{1+x^2} dx = \frac{\pi}{4}
            
            $$
        </div>
    </div>

    <div class="test-section">
        <h2>4. Mixed Inline and Block</h2>
        <div class="description">Testing combinations of inline and block math</div>
        
        <div class="test-case">
            <p>Given the function $f(x) = x^2$, we can derive:</p>
            $$f'(x) = 2x$$
            <p>Therefore, at$x=3$we have$f'(3)=6$.</p>
        </div>
        
        <div class="test-case">
            <p>Chinese mixed: 根据公式$\alpha = \beta + \gamma$，我们得到：</p>
            \[
            \sum_{i=1}^{n} \alpha_i = n(\beta + \gamma)
            \]
            <p>因此结果是$\alpha_{\text{total}} = n\gamma$。</p>
        </div>
    </div>

    <div class="test-section">
        <h2>5. Edge Cases</h2>
        <div class="description">Testing various edge cases and special patterns</div>
        
        <div class="test-case">
            <p>Single character: $x$ and $y$</p>
        </div>
        
        <div class="test-case">
            <p>LaTeX commands: $\alpha$, $\beta$, $\sum$, $\int$</p>
        </div>
        
        <div class="test-case">
            <p>Subscripts and superscripts: $x_i$, $y^2$, $z_{ij}^{(k)}$</p>
        </div>
        
        <div class="test-case">
            <p>Fractions and complex: $\frac{a}{b}$, $\sqrt{x+y}$</p>
        </div>
        
        <div class="test-case">
            <p>Parentheses inline: \(x + y = z\) and \(\alpha \beta\)</p>
        </div>
        
        <div class="test-case">
            <p>Multiple on same line: $a=1$, $b=2$, $c=a+b=3$</p>
        </div>
        
        <div class="test-case">
            <p>Empty should not render: $$ $$ and \[ \]</p>
        </div>
        
        <div class="test-case">
            <p>Euler's identity variations: $e^{i\pi}=-1$, $e^{i\pi}+1=0$</p>
        </div>
        
        <div class="test-case">
            <p>Universal constants: $\pi \approx 3.14159$, $e \approx 2.71828$</p>
        </div>
    </div>

    <div class="test-section">
        <h2>6. Multi-Language Support</h2>
        <div class="description">Testing with various languages and scripts</div>
        
        <div class="test-case">
            <p>French: La formule d'Euler $e^{\pi i}+1=0$ est magnifique.</p>
        </div>
        
        <div class="test-case">
            <p>German: Eulers Identität $e^{\pi i}+1=0$ ist wunderschön.</p>
        </div>
        
        <div class="test-case">
            <p>Spanish: La identidad de Euler $e^{\pi i}+1=0$ es hermosa.</p>
        </div>
        
        <div class="test-case">
            <p>Korean: 오일러의 공식 $e^{\pi i}+1=0$ 은 아름답다.</p>
        </div>
        
        <div class="test-case">
            <p>Hindi: यूलर की पहचान $e^{\pi i}+1=0$ सुंदर है।</p>
        </div>
        
        <div class="test-case">
            <p>Greek: Η ταυτότητα του Euler $e^{\pi i}+1=0$ είναι όμορφη.</p>
        </div>
    </div>

    <div class="test-section">
        <h2>7. Original Chinese Example</h2>
        <div class="description">Your original problematic text</div>
        
        <div class="test-case">
            <p>这里改进的地方已经框出来了，这里会发现相比于base model， 这里加了一个local activation unit， 这里面是一个前馈神经网络，输入是用户历史行为商品和当前的候选商品， 输出是它俩之间的相关性， 这个相关性相当于每个历史商品的权重，把这个权重与原来的历史行为embedding相乘求和就得到了用户的兴趣表示$\boldsymbol{v}_{U}(A)$, 这个东西的计算公式如下：</p>
            
            $$
            \boldsymbol{v}_{U}(A)=f\left(\boldsymbol{v}_{A}, \boldsymbol{e}_{1}, \boldsymbol{e}_{2}, \ldots, \boldsymbol{e}_{H}\right)=\sum_{j=1}^{H} a\left(\boldsymbol{e}_{j}, \boldsymbol{v}_{A}\right) \boldsymbol{e}_{j}=\sum_{j=1}^{H} \boldsymbol{w}_{j} \boldsymbol{e}_{j}
            $$
            
            <p>这里的$\{\boldsymbol{v}_{A}, \boldsymbol{e}_{1}, \boldsymbol{e}_{2}, \ldots, \boldsymbol{e}_{H}\}$是用户$U$的历史行为特征embedding， $v_{A}$表示的是候选广告$A$的embedding向量， $a(e_j, v_A)=w_j$表示的权重或者历史行为商品与当前广告$A$的相关性程度。</p>
        </div>
    </div>
</body>
</html>
